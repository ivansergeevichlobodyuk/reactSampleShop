{% trans_default_domain 'translations' %}
	{%  extends '@!EshopSample/base.html.twig' %}
	{% block content %}
		{% javascripts
			'@EshopSampleBundle/Resources/public/js/order/order.js' %}
			<script src="{{ asset_url }}"></script>
		{% endjavascripts %}
		<script type="text/javascript">
			var url_create_order = "{{ path("orderRepeatCheckout",{"id":item.getId}) }}";
			var msg_order_created = "{{ "ORDER_CREATED_REDIRECT"|trans }}";
			var offline_checkout_success_page = "{{ path("offline_checkout_success_page") }}";
		</script>

		{% set attributeName = '' %}
		{% set attributeCategoryName = '' %}
		{% if locale == 'en' %}
			{% set attributeName = 'nameEn' %}
			{% set attributeCategoryName = 'categoryNameEn' %}
		{% elseif locale == 'ru' %}
			{% set attributeName = 'nameRu' %}
			{% set attributeCategoryName = 'categoryNameRu' %}
		{% elseif locale == 'by' %}
			{% set attributeName = 'nameBy' %}
			{% set attributeCategoryName = 'categoryNameBy' %}
		{% elseif locale == 'ua' %}
			{% set attributeName = 'nameUa' %}
			{% set attributeCategoryName = 'categoryNameUa' %}
		{% endif %}

		<div id="loaded-data" class="orders-wrap uk-width-1-1 uk-padding">
			<div>
				<h3 class="uk-heading-divider">{{ "ORDER_ITEM_HEADER"|trans }}-{{ id }}</h3>
			</div>
			<div class="uk-child-width-1-3@s uk-child-width-1-1 uk-flex uk-flex-middle uk-flex-between uk-flex-wrap">
				<div>

					<ul class="uk-list">
						<li class={% if paybtn %}"uk-text-danger"{% endif %}>
							<span class="uk-text-emphasis uk-text-bold uk-margin-small-right">{{ "ORDER_ITEM_STATUS"|trans }}</span>
							<span>{{ attribute(item.getStatus,attributeName) }}</span>
						</li>
						<li class={% if paybtn %}"uk-text-danger"{% endif %}>
							<span class="uk-text-emphasis uk-text-bold uk-margin-small-right">{{ "ORDER_PAYMENT"|trans }}</span>
							{% if paybtn %}
								<span>{{ "NOT_PAYED"|trans }}</span>
							{% else %}
								<span>{{ item.totalPriceOrder }} {{ item.currency.curCode }}</span>
							{% endif %}
						</li>
					</ul>
				</div>
				<div>
					<ul class="uk-list">
						<li>
							<span class="uk-text-emphasis uk-text-bold uk-margin-small-right">{{ "ORDER_DELIVERY_ADDR"|trans }}</span>
							<span>{{ dataOrder.address }}</span>
						</li>
						<li>
							<span class="uk-text-emphasis uk-text-bold uk-margin-small-right">{{ "ORDER_EMAIL"|trans }}</span>
							<span>{{ dataOrder.email }}</span>
						</li>
						<li>
							<span class="uk-text-emphasis uk-text-bold uk-margin-small-right">{{ "ORDER_PHONE_NUMBER"|trans }}</span>
							<a href="tel:+380501234567" class="uk-link uk-link-reset">{{ dataOrder.phone }} </a>
						</li>
						<li>
							<span class="uk-text-emphasis uk-text-bold uk-margin-small-right">{{ "ORDER_NAME_USER"|trans }}</span>
							<span class="uk-text-capitalize">{{ dataOrder.name ~ " "~ dataOrder.surname }}</span>
						</li>
					</ul>
				</div>
				<div>

				</div>
			</div>
			<div class="uk-overflow-auto">
				<table class="order-table uk-table uk-table-small uk-table-middle uk-table-divider">
					<thead>
						<tr>
							<th class="order-table__th">â„–</th>
							<th class="order-table__th">{{ "ORDER_PRODUCT_ARTICLE"|trans }}</th>
							<th class="order-table__th">{{ "ORDER_PRODUCT_PRODUCT_NAME"|trans }}</th>
							<th class="order-table__th">{{ "ORDER_PRODUCT_CATEGORTY"|trans }}</th>
							<th class="order-table__th">{{ "ORDER_PRODUCT_QUANTITY"|trans }}</th>
							<th class="order-table__th">{{ "ORDER_PRODUCT_PRICE"|trans }}</th>
							<th class="order-table__th">{{ "ORDER_PRODUCT_TOTAL"|trans }}</th>
						</tr>
					</thead>
					<tbody>
						{% set i = 1 %}
						{% for itemProduct in item.products %}
							{% set totalCount = itemProduct.count * itemProduct.getGoods.getMultiply  %}
							<tr class="order-table__tr-item">
								<td>{{ i }}</td>
								<td>{{ itemProduct.getGoods.article }}</td>
								<td class="uk-width-medium@s">
									<div class="uk-flex uk-flex-middle uk-flex-between uk-flex-wrap">
										<a href="#" class="order-table__link uk-width-3-4" data-load="{{ url("cart_item_modal",{"id":itemProduct.getGoods.id}) }}">{{ attribute(itemProduct.getGoods,attributeName) }}</a>
									</div>
								</td>
								<td>{{ attribute(itemProduct.getGoods.getCategories,attributeCategoryName)  }}</td>
								<td>
									<div class="uk-flex uk-flex-middle uk-flex-between uk-flex-wrap uk-child-width-1-2@l">
										<span class="goods-qty order-table__qty uk-text-capitalize ">{{ totalCount }}{{ "PCS"|trans }}</span>
									</div>
								</td>
								<td>{{ itemProduct.priceSnap }} {{ item.currency.curCode }}</td>
								<td>{{ itemProduct.getTotalPrice }} {{ item.currency.curCode }}</td>
							</tr>
							{% set i=i+1 %}
						{% endfor %}
					</tbody>
					<tfoot>
						<tr>
							<td></td>
							<td colspan="3">
								<span class="uk-text-bold">{{ "ORDER_COMMENTS"|trans }}</span><br>
								{% if dataOrder.description is defined %}
									<span>{{ dataOrder.description }}</span>
								{% else %}
									{{ "NO_DESCRIPTION"|trans }}
								{% endif %}
							</td>
							<td class="uk-text-large uk-text-right">{{ "Total"|trans }} :</td>
							<td colspan="2" class="uk-text-bold uk-text-large uk-text-right">{{ item.getTotalPriceOrder }} {{ item.currency.curCode }}</td>
						</tr>
					</tfoot>
				</table>
				{% if paybtn %}
					{{ paybtn|raw }}
				{% else %}
					<button id="repeat-button" class="goods-buy-btn uk-button">{{ "REPEAT_ORDER_OFFLINE"|trans }}</button>
				{% endif %}
			</div>
			<div id="cart-modal-item" class="uk-flex-top" uk-modal>
				<div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical">
					<div id="loaded-modal-data" class="content">

					</div>
					<button class="uk-modal-close-default" type="button" uk-close></button>
				</div>
			</div>
		</div>
	{% endblock %}